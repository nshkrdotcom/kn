<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8fafc"/>
  
  <!-- Header -->
  <rect x="0" y="0" width="1200" height="60" fill="#1e293b"/>
  <text x="25" y="38" font-family="Arial" font-size="22" fill="white">ContextNexus</text>
  <text x="220" y="38" font-family="Arial" font-size="14" fill="#94a3b8">Advanced Selection Mode</text>
  
  <!-- Status Bar -->
  <rect x="600" y="15" width="200" height="30" rx="15" fill="#334155"/>
  <rect x="610" y="20" width="120" height="20" rx="10" fill="#475569"/>
  <rect x="610" y="20" width="84" height="20" rx="10" fill="#38bdf8"/>
  <text x="670" y="35" font-family="Arial" font-size="12" fill="white" text-anchor="middle">70% selected</text>
  
  <rect x="820" y="15" width="180" height="30" rx="15" fill="#334155"/>
  <text x="910" y="35" font-family="Arial" font-size="12" fill="white" text-anchor="middle">7,021 / 10,000 tokens</text>
  
  <rect x="1020" y="15" width="80" height="30" rx="15" fill="#0ea5e9"/>
  <text x="1060" y="35" font-family="Arial" font-size="14" fill="white" text-anchor="middle">Apply</text>
  
  <circle cx="1140" cy="30" r="20" fill="#38bdf8"/>
  <text x="1140" y="35" font-family="Arial" font-size="14" fill="white" text-anchor="middle">VP</text>
  
  <!-- Selection Tools Bar -->
  <rect x="0" y="60" width="1200" height="40" fill="#e2e8f0"/>
  
  <!-- Selection Modes -->
  <rect x="20" y="65" width="120" height="30" rx="15" fill="#0ea5e9"/>
  <text x="80" y="85" font-family="Arial" font-size="14" fill="white" text-anchor="middle">Ninja Mode</text>
  
  <rect x="150" y="65" width="120" height="30" rx="15" fill="#e2e8f0"/>
  <text x="210" y="85" font-family="Arial" font-size="14" fill="#475569" text-anchor="middle">Visual Mode</text>
  
  <rect x="280" y="65" width="120" height="30" rx="15" fill="#e2e8f0"/>
  <text x="340" y="85" font-family="Arial" font-size="14" fill="#475569" text-anchor="middle">Smart Select</text>
  
  <!-- Content Filters -->
  <rect x="520" y="65" width="90" height="30" rx="15" fill="#0ea5e9"/>
  <text x="565" y="85" font-family="Arial" font-size="14" fill="white" text-anchor="middle">All</text>
  
  <rect x="620" y="65" width="90" height="30" rx="15" fill="#e2e8f0"/>
  <text x="665" y="85" font-family="Arial" font-size="14" fill="#475569" text-anchor="middle">Code</text>
  
  <rect x="720" y="65" width="90" height="30" rx="15" fill="#e2e8f0"/>
  <text x="765" y="85" font-family="Arial" font-size="14" fill="#475569" text-anchor="middle">Lists</text>
  
  <rect x="820" y="65" width="90" height="30" rx="15" fill="#e2e8f0"/>
  <text x="865" y="85" font-family="Arial" font-size="14" fill="#475569" text-anchor="middle">Images</text>
  
  <rect x="920" y="65" width="90" height="30" rx="15" fill="#e2e8f0"/>
  <text x="965" y="85" font-family="Arial" font-size="14" fill="#475569" text-anchor="middle">User</text>
  
  <rect x="1020" y="65" width="90" height="30" rx="15" fill="#e2e8f0"/>
  <text x="1065" y="85" font-family="Arial" font-size="14" fill="#475569" text-anchor="middle">AI</text>
  
  <!-- Main Content -->
  <rect x="0" y="100" width="850" height="700" fill="#f1f5f9"/>
  
  <!-- Chat Messages UI with Advanced Selection -->
  <!-- User Message 1 -->
  <rect x="20" y="120" width="810" height="100" rx="10" fill="white" stroke="#ddd" stroke-width="1"/>
  
  <!-- Selection Controls -->
  <rect x="20" y="120" width="30" height="100" rx="5 0 0 5" fill="#f8fafc"/>
  <rect x="25" y="130" width="20" height="20" rx="3" fill="#dbeafe"/>
  <text x="35" y="146" font-family="Arial" font-size="18" fill="#0ea5e9" font-weight="bold" text-anchor="middle">✓</text>
  <text x="35" y="160" font-family="Arial" font-size="10" fill="#475569" text-anchor="middle">1</text>
  
  <!-- Message Header -->
  <circle cx="65" cy="140" r="15" fill="#0ea5e9"/>
  <text x="65" y="145" font-family="Arial" font-size="14" fill="white" text-anchor="middle">VP</text>
  <text x="90" y="140" font-family="Arial" font-size="14" font-weight="bold" fill="#334155">You</text>
  <text x="120" y="140" font-family="Arial" font-size="12" fill="#94a3b8">10:15 AM</text>
  
  <!-- Message Content -->
  <text x="65" y="170" font-family="Arial" font-size="14" fill="#334155">I need to analyze a large dataset of customer transactions to identify purchasing patterns and</text>
  <text x="65" y="195" font-family="Arial" font-size="14" fill="#334155">predict future behavior. What machine learning techniques would you recommend?</text>
  
  <!-- Keyboard Shortcut Indicator -->
  <rect x="760" y="130" width="60" height="25" rx="5" fill="#e2e8f0"/>
  <text x="790" y="146" font-family="Arial" font-size="12" fill="#475569" text-anchor="middle">Ctrl+1</text>
  
  <!-- AI Message 1 -->
  <rect x="20" y="230" width="810" height="320" rx="10" fill="white" stroke="#ddd" stroke-width="1"/>
  
  <!-- Selection Controls with Paragraph-Level Selection -->
  <rect x="20" y="230" width="30" height="320" rx="5 0 0 5" fill="#f8fafc"/>
  <rect x="25" y="240" width="20" height="20" rx="3" fill="#e2e8f0"/>
  <text x="35" y="270" font-family="Arial" font-size="10" fill="#475569" text-anchor="middle">2</text>
  
  <!-- Paragraph-level selection controls -->
  <rect x="25" y="290" width="20" height="20" rx="3" fill="#dbeafe"/>
  <text x="35" y="306" font-family="Arial" font-size="18" fill="#0ea5e9" font-weight="bold" text-anchor="middle">✓</text>
  <text x="35" y="320" font-family="Arial" font-size="8" fill="#475569" text-anchor="middle">2.1</text>
  
  <rect x="25" y="370" width="20" height="20" rx="3" fill="#dbeafe"/>
  <text x="35" y="386" font-family="Arial" font-size="18" fill="#0ea5e9" font-weight="bold" text-anchor="middle">✓</text>
  <text x="35" y="400" font-family="Arial" font-size="8" fill="#475569" text-anchor="middle">2.2</text>
  
  <rect x="25" y="460" width="20" height="20" rx="3" fill="#e2e8f0"/>
  <text x="35" y="490" font-family="Arial" font-size="8" fill="#475569" text-anchor="middle">2.3</text>
  
  <!-- Message Header -->
  <circle cx="65" cy="250" r="15" fill="#0284c7"/>
  <text x="65" y="255" font-family="Arial" font-size="14" fill="white" text-anchor="middle">AI</text>
  <text x="90" y="250" font-family="Arial" font-size="14" font-weight="bold" fill="#334155">Assistant</text>
  <text x="160" y="250" font-family="Arial" font-size="12" fill="#94a3b8">10:16 AM</text>
  
  <!-- Message Content with Visual Selection Indicators -->
  <!-- Introduction Paragraph -->
  <rect x="65" y="275" width="750" height="60" rx="5" opacity="0.2" fill="#bae6fd"/>
  <text x="65" y="295" font-family="Arial" font-size="14" fill="#334155">For analyzing customer transaction data and predicting future behavior, several machine learning</text>
  <text x="65" y="320" font-family="Arial" font-size="14" fill="#334155">approaches can be effective. Let me outline the key techniques and their applications.</text>
  
  <!-- Techniques Section Selected -->
  <rect x="65" y="345" width="750" height="100" rx="5" fill="#bae6fd" opacity="0.3"/>
  <text x="65" y="365" font-family="Arial" font-size="14" fill="#0c4a6e" font-weight="bold">Recommended ML Techniques:</text>
  <text x="85" y="390" font-family="Arial" font-size="14" fill="#334155">1. Clustering (K-means, DBSCAN) - Identify natural groupings of similar customers</text>
  <text x="85" y="415" font-family="Arial" font-size="14" fill="#334155">2. Classification (Random Forest, XGBoost) - Predict categorical outcomes like churn</text>
  <text x="85" y="440" font-family="Arial" font-size="14" fill="#334155">3. Regression models - Forecast continuous values like future spending</text>
  
  <!-- Implementation Section (Not Selected) -->
  <text x="65" y="470" font-family="Arial" font-size="14" fill="#0c4a6e" font-weight="bold">Implementation Approach:</text>
  <text x="65" y="495" font-family="Arial" font-size="14" fill="#334155">I recommend starting with exploratory data analysis, then feature engineering before applying</text>
  <text x="65" y="520" font-family="Arial" font-size="14" fill="#334155">these models. This will help identify meaningful patterns in your transaction data.</text>

  <!-- Keyboard Shortcut Indicator -->
  <rect x="760" y="240" width="60" height="25" rx="5" fill="#e2e8f0"/>
  <text x="790" y="256" font-family="Arial" font-size="12" fill="#475569" text-anchor="middle">Ctrl+2</text>
  
  <!-- Python Code Message -->
  <rect x="20" y="560" width="810" height="230" rx="10" fill="white" stroke="#ddd" stroke-width="1"/>
  
  <!-- Selection Controls -->
  <rect x="20" y="560" width="30" height="230" rx="5 0 0 5" fill="#f8fafc"/>
  <rect x="25" y="570" width="20" height="20" rx="3" fill="#dbeafe"/>
  <text x="35" y="586" font-family="Arial" font-size="18" fill="#0ea5e9" font-weight="bold" text-anchor="middle">✓</text>
  <text x="35" y="600" font-family="Arial" font-size="10" fill="#475569" text-anchor="middle">3</text>
  
  <!-- Message Header -->
  <circle cx="65" cy="580" r="15" fill="#0284c7"/>
  <text x="65" y="585" font-family="Arial" font-size="14" fill="white" text-anchor="middle">AI</text>
  <text x="90" y="580" font-family="Arial" font-size="14" font-weight="bold" fill="#334155">Code: Customer Clustering Example</text>
  <text x="335" y="580" font-family="Arial" font-size="12" fill="#94a3b8">10:17 AM</text>
  
  <!-- Code Block Selected -->
  <rect x="65" y="600" width="750" height="180" rx="5" fill="#f1f5f9" stroke="#cbd5e0" stroke-width="1"/>
  
  <!-- Code Content -->
  <text x="80" y="625" font-family="Consolas, monospace" font-size="14" fill="#334155">import pandas as pd</text>
  <text x="80" y="650" font-family="Consolas, monospace" font-size="14" fill="#334155">from sklearn.cluster import KMeans</text>
  <text x="80" y="675" font-family="Consolas, monospace" font-size="14" fill="#334155">from sklearn.preprocessing import StandardScaler</text>
  <text x="80" y="700" font-family="Consolas, monospace" font-size="14" fill="#334155"></text>
  <text x="80" y="725" font-family="Consolas, monospace" font-size="14" fill="#334155"># Load and prepare transaction data</text>
  <text x="80" y="750" font-family="Consolas, monospace" font-size="14" fill="#334155">df = pd.read_csv('customer_transactions.csv')</text>
  <text x="80" y="775" font-family="Consolas, monospace" font-size="14" fill="#334155">features = ['frequency', 'recency', 'monetary_value']</text>
  
  <!-- Keyboard Shortcut Indicator -->
  <rect x="760" y="570" width="60" height="25" rx="5" fill="#e2e8f0"/>
  <text x="790" y="586" font-family="Arial" font-size="12" fill="#475569" text-anchor="middle">Ctrl+3</text>
  
  <!-- Right Panel - Context Management -->
  <rect x="850" y="100" width="350" height="700" fill="white" stroke="#ddd" stroke-width="1"/>
  
  <!-- Panel Header -->
  <rect x="850" y="100" width="350" height="50" fill="#f8fafc" stroke-bottom="#e2e8f0" stroke-width="1"/>
  <text x="1025" y="130" font-family="Arial" font-size="16" fill="#334155" font-weight="bold" text-anchor="middle">Context Management</text>
  
  <!-- Selection Stats -->
  <rect x="870" y="160" width="310" height="100" rx="10" fill="#f1f5f9"/>
  <text x="890" y="185" font-family="Arial" font-size="16" fill="#0c4a6e" font-weight="bold">Current Selection</text>
  <text x="890" y="215" font-family="Arial" font-size="14" fill="#334155">5 items selected (70% of context)</text>
  <text x="890" y="240" font-family="Arial" font-size="14" fill="#334155">Focused on ML techniques and code</text>
  
  <!-- Token Heat Map -->
  <rect x="870" y="270" width="310" height="160" rx="10" fill="#f1f5f9"/>
  <text x="890" y="295" font-family="Arial" font-size="16" fill="#0c4a6e" font-weight="bold">Token Heat Map</text>
  
  <!-- Heat Map Visualization -->
  <rect x="890" y="315" width="270" height="20" rx="10" fill="#dbeafe"/>
  <text x="905" y="330" font-family="Arial" font-size="12" fill="#0c4a6e">Message 1 (User)</text>
  <text x="1140" y="330" font-family="Arial" font-size="12" fill="#0c4a6e" text-anchor="end">650 tokens</text>
  
  <rect x="890" y="345" width="270" height="20" rx="10" fill="#93c5fd"/>
  <text x="905" y="360" font-family="Arial" font-size="12" fill="#0c4a6e">Message 2.1 (Intro)</text>
  <text x="1140" y="360" font-family="Arial" font-size="12" fill="#0c4a6e" text-anchor="end">420 tokens</text>
  
  <rect x="890" y="375" width="270" height="20" rx="10" fill="#60a5fa"/>
  <text x="905" y="390" font-family="Arial" font-size="12" fill="white">Message 2.2 (Techniques)</text>
  <text x="1140" y="390" font-family="Arial" font-size="12" fill="white" text-anchor="end">750 tokens</text>
  
  <rect x="890" y="405" width="270" height="20" rx="10" fill="#dbeafe" opacity="0.3"/>
  <text x="905" y="420" font-family="Arial" font-size="12" fill="#94a3b8">Message 2.3 (Implementation)</text>
  <text x="1140" y="420" font-family="Arial" font-size="12" fill="#94a3b8" text-anchor="end">0 tokens</text>
  
  <rect x="890" y="435" width="270" height="20" rx="10" fill="#2563eb"/>
  <text x="905" y="450" font-family="Arial" font-size="12" fill="white">Message 3 (Code)</text>
  <text x="1140" y="450" font-family="Arial" font-size="12" fill="white" text-anchor="end">910 tokens</text>
  
  <!-- Advanced Selection Tools -->
  <rect x="870" y="440" width="310" height="210" rx="10" fill="#f1f5f9"/>
  <text x="890" y="465" font-family="Arial" font-size="16" fill="#0c4a6e" font-weight="bold">Ninja Selection Tools</text>
  
  <!-- Selection Shortcuts -->
  <rect x="890" y="485" width="270" height="30" rx="5" fill="#dbeafe"/>
  <text x="910" y="505" font-family="Arial" font-size="14" fill="#0c4a6e">Ctrl+Alt+C</text>
  <text x="1010" y="505" font-family="Arial" font-size="14" fill="#0c4a6e">Select All Code Blocks</text>
  
  <rect x="890" y="525" width="270" height="30" rx="5" fill="#dbeafe"/>
  <text x="910" y="545" font-family="Arial" font-size="14" fill="#0c4a6e">Ctrl+Alt+L</text>
  <text x="1010" y="545" font-family="Arial" font-size="14" fill="#0c4a6e">Select All Lists</text>
  
  <rect x="890" y="565" width="270" height="30" rx="5" fill="#dbeafe"/>
  <text x="910" y="585" font-family="Arial" font-size="14" fill="#0c4a6e">Ctrl+I</text>
  <text x="1010" y="585" font-family="Arial" font-size="14" fill="#0c4a6e">Invert Selection</text>
  
  <rect x="890" y="605" width="270" height="30" rx="5" fill="#dbeafe"/>
  <text x="910" y="625" font-family="Arial" font-size="14" fill="#0c4a6e">Alt+R</text>
  <text x="1010" y="625" font-family="Arial" font-size="14" fill="#0c4a6e">Select by Relevance</text>
  
  <!-- Smart Suggestion -->
  <rect x="870" y="660" width="310" height="120" rx="10" fill="#dbeafe"/>
  <text x="890" y="685" font-family="Arial" font-size="16" fill="#1e40af" font-weight="bold">Smart Context Suggestion</text>
  <text x="890" y="715" font-family="Arial" font-size="14" fill="#1e40af">Consider adding the implementation</text>
  <text x="890" y="740" font-family="Arial" font-size="14" fill="#1e40af">section to balance theoretical and</text>
  <text x="890" y="765" font-family="Arial" font-size="14" fill="#1e40af">practical context (+ 280 tokens)</text>
  
  <!-- One-Click Add Button -->
  <rect x="1030" y="730" width="130" height="30" rx="15" fill="#0ea5e9"/>
  <text x="1095" y="750" font-family="Arial" font-size="14" fill="white" text-anchor="middle">Add Section</text>
  
  <!-- Active Selection View - Float at Bottom of Main Panel -->
  <rect x="20" y="720" width="810" height="60" rx="10" fill="#0c4a6e"/>
  <text x="40" y="750" font-family="Arial" font-size="14" fill="white">Active Selection: Message 1, Intro, ML Techniques, Code Block (7,021 tokens) — Space to toggle • Tab to navigate • F to filter</text>
  <rect x="710" y="735" width="100" height="30" rx="15" fill="#0ea5e9"/>
  <text x="760" y="755" font-family="Arial" font-size="14" fill="white" text-anchor="middle">Apply</text>
</svg>